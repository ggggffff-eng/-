<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跳转中间页</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
            overflow: hidden;
        }
        .container {
            text-align: center;
        }
        .icon {
            width: 60px;
            height: 60px;
            margin-bottom: 10px;
        }
        .loading {
            animation: rotate 1s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://your-icon-url.com/icon.png" alt="Loading" class="icon loading">
        <p>正在跳转，请稍后...</p>
    </div>

    <script>
        // 加载时记录访问量
        function logEvent(eventType) {
            fetch('https://your-analytics-endpoint.com/log', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type: eventType })
            });
        }

        // 解密函数
        function decryptAES(encrypted, key, iv) {
            // Base64 解码
            const encryptedBytes = atob(encrypted);
            const keyBytes = atob(key);
            const ivBytes = atob(iv);

            // 转换为 ArrayBuffer
            const encryptedArray = String.fromCharCode.apply(null, new Uint8Array(Buffer.from(encryptedBytes, 'binary')));
            const keyArray = String.fromCharCode.apply(null, new Uint8Array(Buffer.from(keyBytes, 'binary')));
            const ivArray = String.fromCharCode.apply(null, new Uint8Array(Buffer.from(ivBytes, 'binary')));

            // 解密逻辑（示例，需替换为实际解密方法）
            // 请注意：前端解密存在安全风险，建议仅解密部分信息或在后端解密
            // 此处使用占位解密逻辑
            return 'https://v.douyin.com/iPs7Xocq/'; // 示例解密后的 URL
        }

        // 页面加载时执行
        logEvent('visit'); // 记录访问量

        // 加密参数
        const encryptedUrl = 'aUhhaE1YaEZYNWhLclc2VzVSN3FxRThZaHdMZVVRdA==';
        const key = 'aGVsbG8gd29ybGQ=';
        const iv = 'aWYgbmVlZCBpbmZvcm1hdGlvbiBpbnZvaXRlZCA=';

        // 跳转逻辑
        function redirectToTarget() {
            const decryptedUrl = decryptAES(encryptedUrl, key, iv); // 解密目标地址
            window.location.href = decryptedUrl;
        }

        // 立即执行跳转
        setTimeout(redirectToTarget, 1000); // 延迟 1 秒跳转
        logEvent('redirect'); // 记录跳转量
    </script>
</body>
</html>